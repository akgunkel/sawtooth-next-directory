<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1518px" preserveAspectRatio="none" style="width:3192px;height:1518px;" version="1.1" viewBox="0 0 3192 1518" width="3192px" zoomAndPan="magnify"><defs><filter height="300%" id="f1e88ykovxg6ih" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="4.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="8.0" dy="8.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="28" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="614" x="1280.5" y="45.9902">RBAC Proposals OutboundSync Sequence</text><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="206" x2="206" y1="233.1875" y2="1339.7031"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="340" x2="340" y1="233.1875" y2="1339.7031"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="512" x2="512" y1="233.1875" y2="1339.7031"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="738" x2="738" y1="233.1875" y2="1339.7031"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="926" x2="926" y1="233.1875" y2="1339.7031"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1225" x2="1225" y1="233.1875" y2="1339.7031"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1657" x2="1657" y1="233.1875" y2="1339.7031"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="2076" x2="2076" y1="233.1875" y2="1339.7031"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="2234" x2="2234" y1="233.1875" y2="1339.7031"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="2701" x2="2701" y1="233.1875" y2="1339.7031"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="2883" x2="2883" y1="233.1875" y2="1339.7031"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="3069" x2="3069" y1="233.1875" y2="1339.7031"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="120" x="140" y="226.584">Azure AD</text><path d="M165,144.5938 L165,192.5938 M165,168.5938 L199,168.5938 " fill="none" filter="url(#f1e88ykovxg6ih)" style="stroke: #A80036; stroke-width: 4.0;"/><ellipse cx="223" cy="168.5938" fill="#FEFECE" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="120" x="140" y="1363.6934">Azure AD</text><path d="M165,1378.2969 L165,1426.2969 M165,1402.2969 L199,1402.2969 " fill="none" filter="url(#f1e88ykovxg6ih)" style="stroke: #A80036; stroke-width: 4.0;"/><ellipse cx="223" cy="1402.2969" fill="#FEFECE" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="68" x="301" y="226.584">LDAP</text><path d="M300,144.5938 L300,192.5938 M300,168.5938 L334,168.5938 " fill="none" filter="url(#f1e88ykovxg6ih)" style="stroke: #A80036; stroke-width: 4.0;"/><ellipse cx="358" cy="168.5938" fill="#FEFECE" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="68" x="301" y="1363.6934">LDAP</text><path d="M300,1378.2969 L300,1426.2969 M300,1402.2969 L334,1402.2969 " fill="none" filter="url(#f1e88ykovxg6ih)" style="stroke: #A80036; stroke-width: 4.0;"/><ellipse cx="358" cy="1402.2969" fill="#FEFECE" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="186" x="410" y="193.9902">RBAC provider</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="118" x="448" y="226.584">&lt;Azure&gt;</text><path d="M472,112 L472,160 M472,136 L506,136 " fill="none" filter="url(#f1e88ykovxg6ih)" style="stroke: #A80036; stroke-width: 4.0;"/><ellipse cx="530" cy="136" fill="#ADD8E6" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="186" x="410" y="1363.6934">RBAC provider</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="118" x="448" y="1396.2871">&lt;Azure&gt;</text><path d="M472,1410.8906 L472,1458.8906 M472,1434.8906 L506,1434.8906 " fill="none" filter="url(#f1e88ykovxg6ih)" style="stroke: #A80036; stroke-width: 4.0;"/><ellipse cx="530" cy="1434.8906" fill="#ADD8E6" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="186" x="636" y="193.9902">RBAC Provider</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="112" x="677" y="226.584">&lt;LDAP&gt;</text><path d="M698,112 L698,160 M698,136 L732,136 " fill="none" filter="url(#f1e88ykovxg6ih)" style="stroke: #A80036; stroke-width: 4.0;"/><ellipse cx="756" cy="136" fill="#ADD8E6" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="186" x="636" y="1363.6934">RBAC Provider</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="112" x="677" y="1396.2871">&lt;LDAP&gt;</text><path d="M698,1410.8906 L698,1458.8906 M698,1434.8906 L732,1434.8906 " fill="none" filter="url(#f1e88ykovxg6ih)" style="stroke: #A80036; stroke-width: 4.0;"/><ellipse cx="756" cy="1434.8906" fill="#ADD8E6" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="118" x="862" y="226.584">Approver</text><ellipse cx="927" cy="86.5938" fill="#FEFECE" filter="url(#f1e88ykovxg6ih)" rx="16" ry="16" style="stroke: #A80036; stroke-width: 4.0;"/><path d="M927,102.5938 L927,156.5938 M901,118.5938 L953,118.5938 M927,156.5938 L901,186.5938 M927,156.5938 L953,186.5938 " fill="none" filter="url(#f1e88ykovxg6ih)" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="118" x="862" y="1363.6934">Approver</text><ellipse cx="927" cy="1390.2969" fill="#FEFECE" filter="url(#f1e88ykovxg6ih)" rx="16" ry="16" style="stroke: #A80036; stroke-width: 4.0;"/><path d="M927,1406.2969 L927,1460.2969 M901,1422.2969 L953,1422.2969 M927,1460.2969 L901,1490.2969 M927,1460.2969 L953,1490.2969 " fill="none" filter="url(#f1e88ykovxg6ih)" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="152" x="1143" y="226.584">RBAC Client</text><path d="M1184,144.5938 L1184,192.5938 M1184,168.5938 L1218,168.5938 " fill="none" filter="url(#f1e88ykovxg6ih)" style="stroke: #A80036; stroke-width: 4.0;"/><ellipse cx="1242" cy="168.5938" fill="#ADD8E6" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="152" x="1143" y="1363.6934">RBAC Client</text><path d="M1184,1378.2969 L1184,1426.2969 M1184,1402.2969 L1218,1402.2969 " fill="none" filter="url(#f1e88ykovxg6ih)" style="stroke: #A80036; stroke-width: 4.0;"/><ellipse cx="1242" cy="1402.2969" fill="#ADD8E6" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="72" x="1611" y="161.3965">RBAC</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="116" x="1589" y="193.9902">REST API</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="84" x="1609" y="226.584">Server</text><ellipse cx="1657" cy="103.4063" fill="#ADD8E6" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><line style="stroke: #A80036; stroke-width: 4.0;" x1="1633" x2="1681" y1="131.4063" y2="131.4063"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="72" x="1611" y="1363.6934">RBAC</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="116" x="1589" y="1396.2871">REST API</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="84" x="1609" y="1428.8809">Server</text><ellipse cx="1657" cy="1467.4844" fill="#ADD8E6" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><line style="stroke: #A80036; stroke-width: 4.0;" x1="1633" x2="1681" y1="1495.4844" y2="1495.4844"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="114" x="2014" y="226.584">Validator</text><path d="M2036,144.5938 L2036,192.5938 M2036,168.5938 L2070,168.5938 " fill="none" filter="url(#f1e88ykovxg6ih)" style="stroke: #A80036; stroke-width: 4.0;"/><ellipse cx="2094" cy="168.5938" fill="#D3D3D3" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="114" x="2014" y="1363.6934">Validator</text><path d="M2036,1378.2969 L2036,1426.2969 M2036,1402.2969 L2070,1402.2969 " fill="none" filter="url(#f1e88ykovxg6ih)" style="stroke: #A80036; stroke-width: 4.0;"/><ellipse cx="2094" cy="1402.2969" fill="#D3D3D3" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="136" x="2160" y="226.584">RethinkDB</text><path d="M2198,128.5938 C2198,108.5938 2234,108.5938 2234,108.5938 C2234,108.5938 2270,108.5938 2270,128.5938 L2270,180.5938 C2270,200.5938 2234,200.5938 2234,200.5938 C2234,200.5938 2198,200.5938 2198,180.5938 L2198,128.5938 " fill="#ADD8E6" filter="url(#f1e88ykovxg6ih)" style="stroke: #000000; stroke-width: 3.0;"/><path d="M2198,128.5938 C2198,148.5938 2234,148.5938 2234,148.5938 C2234,148.5938 2270,148.5938 2270,128.5938 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="136" x="2160" y="1363.6934">RethinkDB</text><path d="M2198,1390.2969 C2198,1370.2969 2234,1370.2969 2234,1370.2969 C2234,1370.2969 2270,1370.2969 2270,1390.2969 L2270,1442.2969 C2270,1462.2969 2234,1462.2969 2234,1462.2969 C2234,1462.2969 2198,1462.2969 2198,1442.2969 L2198,1390.2969 " fill="#ADD8E6" filter="url(#f1e88ykovxg6ih)" style="stroke: #000000; stroke-width: 3.0;"/><path d="M2198,1390.2969 C2198,1410.2969 2234,1410.2969 2234,1410.2969 C2234,1410.2969 2270,1410.2969 2270,1390.2969 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="72" x="2656" y="161.3965">RBAC</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="150" x="2617" y="193.9902">Transaction</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="126" x="2633" y="226.584">Processor</text><ellipse cx="2702" cy="103.4063" fill="#ADD8E6" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><line style="stroke: #A80036; stroke-width: 4.0;" x1="2678" x2="2726" y1="131.4063" y2="131.4063"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="72" x="2656" y="1363.6934">RBAC</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="150" x="2617" y="1396.2871">Transaction</text><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="126" x="2633" y="1428.8809">Processor</text><ellipse cx="2702" cy="1467.4844" fill="#ADD8E6" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><line style="stroke: #A80036; stroke-width: 4.0;" x1="2678" x2="2726" y1="1495.4844" y2="1495.4844"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="142" x="2807" y="226.584">LS Inbound</text><ellipse cx="2884" cy="168.5938" fill="#ADD8E6" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><line style="stroke: #A80036; stroke-width: 4.0;" x1="2860" x2="2908" y1="196.5938" y2="196.5938"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="142" x="2807" y="1363.6934">LS Inbound</text><ellipse cx="2884" cy="1402.2969" fill="#ADD8E6" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><line style="stroke: #A80036; stroke-width: 4.0;" x1="2860" x2="2908" y1="1430.2969" y2="1430.2969"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="166" x="2981" y="226.584">LS Outbound</text><ellipse cx="3070" cy="168.5938" fill="#ADD8E6" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><line style="stroke: #A80036; stroke-width: 4.0;" x1="3046" x2="3094" y1="196.5938" y2="196.5938"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="166" x="2981" y="1363.6934">LS Outbound</text><ellipse cx="3070" cy="1402.2969" fill="#ADD8E6" filter="url(#f1e88ykovxg6ih)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><line style="stroke: #A80036; stroke-width: 4.0;" x1="3046" x2="3094" y1="1430.2969" y2="1430.2969"/><rect fill="#EEEEEE" filter="url(#f1e88ykovxg6ih)" height="6" style="stroke: #EEEEEE; stroke-width: 2.0;" width="3163" x="6" y="294.3203"/><line style="stroke: #000000; stroke-width: 2.0;" x1="6" x2="3169" y1="294.3203" y2="294.3203"/><line style="stroke: #000000; stroke-width: 2.0;" x1="6" x2="3169" y1="300.3203" y2="300.3203"/><rect fill="#EEEEEE" filter="url(#f1e88ykovxg6ih)" height="46.2656" style="stroke: #000000; stroke-width: 4.0;" width="286" x="1444.5" y="273.1875"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="250" x="1456.5" y="305.3213">Proposal Approval</text><polygon fill="#A80036" points="1201,373.7188,1221,381.7188,1201,389.7188,1209,381.7188" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="927" x2="1213" y1="381.7188" y2="381.7188"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="941" y="371.5869">1</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="224" x="967" y="371.5869">Approves proposal</text><polygon fill="#A80036" points="1633,431.9844,1653,439.9844,1633,447.9844,1641,439.9844" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1225" x2="1645" y1="439.9844" y2="439.9844"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1239" y="429.8525">2</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="224" x="1265" y="429.8525">Hit REST endpoint</text><polygon fill="#A80036" points="2678,490.25,2698,498.25,2678,506.25,2686,498.25" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1657" x2="2690" y1="498.25" y2="498.25"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1671" y="488.1182">3</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="360" x="1697" y="488.1182">Initialize sawtooth transaction</text><polygon fill="#A80036" points="2053,548.5156,2073,556.5156,2053,564.5156,2061,556.5156" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1657" x2="2065" y1="556.5156" y2="556.5156"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1671" y="546.3838">4</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="346" x="1697" y="546.3838">Create sawtooth transaction</text><polygon fill="#A80036" points="1247,606.7813,1227,614.7813,1247,622.7813,1239,614.7813" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1235" x2="1655" y1="614.7813" y2="614.7813"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1259" y="604.6494">5</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="358" x="1285" y="604.6494">Return approval confirmation</text><rect fill="#EEEEEE" filter="url(#f1e88ykovxg6ih)" height="6" style="stroke: #EEEEEE; stroke-width: 2.0;" width="3163" x="6" y="671.9141"/><line style="stroke: #000000; stroke-width: 2.0;" x1="6" x2="3169" y1="671.9141" y2="671.9141"/><line style="stroke: #000000; stroke-width: 2.0;" x1="6" x2="3169" y1="677.9141" y2="677.9141"/><rect fill="#EEEEEE" filter="url(#f1e88ykovxg6ih)" height="46.2656" style="stroke: #000000; stroke-width: 4.0;" width="176" x="1499.5" y="650.7813"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="1511.5" y="682.915">Outbound</text><polygon fill="#A80036" points="3046,751.3125,3066,759.3125,3046,767.3125,3054,759.3125" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2077" x2="3058" y1="759.3125" y2="759.3125"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2091" y="749.1807">6</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="534" x="2117" y="749.1807">Get complete transaction from changefeed</text><polygon fill="#A80036" points="2256,809.5781,2236,817.5781,2256,825.5781,2248,817.5781" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2244" x2="2700" y1="817.5781" y2="817.5781"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2268" y="807.4463">7</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="282" x="2294" y="807.4463">Update relevant tables</text><polygon fill="#A80036" points="2256,867.8438,2236,875.8438,2256,883.8438,2248,875.8438" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2244" x2="2700" y1="875.8438" y2="875.8438"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2268" y="865.7119">8</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="394" x="2294" y="865.7119">set sync_direction "OUTBOUND"</text><polygon fill="#A80036" points="2256,926.1094,2236,934.1094,2256,942.1094,2248,934.1094" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2244" x2="3068" y1="934.1094" y2="934.1094"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2268" y="923.9775">9</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="320" x="2294" y="923.9775">Insert to outbound_queue</text><polygon fill="#A80036" points="761,984.375,741,992.375,761,1000.375,753,992.375" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="749" x2="2232" y1="992.375" y2="992.375"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="773" y="982.2432">10</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="508" x="817" y="982.2432">Provider gets item from outbound_queue</text><polygon fill="#A80036" points="363,1042.6406,343,1050.6406,363,1058.6406,355,1050.6406" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="351" x2="737" y1="1050.6406" y2="1050.6406"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="375" y="1040.5088">11</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="282" x="419" y="1040.5088">Insert into LDAP server</text><rect fill="#EEEEEE" filter="url(#f1e88ykovxg6ih)" height="6" style="stroke: #EEEEEE; stroke-width: 2.0;" width="3163" x="6" y="1107.7734"/><line style="stroke: #000000; stroke-width: 2.0;" x1="6" x2="3169" y1="1107.7734" y2="1107.7734"/><line style="stroke: #000000; stroke-width: 2.0;" x1="6" x2="3169" y1="1113.7734" y2="1113.7734"/><rect fill="#EEEEEE" filter="url(#f1e88ykovxg6ih)" height="46.2656" style="stroke: #000000; stroke-width: 4.0;" width="116" x="1529.5" y="1086.6406"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="1541.5" y="1118.7744">TODO</text><path d="M16,1162.9063 L16,1242.9063 L390,1242.9063 L390,1182.9063 L370,1162.9063 L16,1162.9063 " fill="#FFFFE0" filter="url(#f1e88ykovxg6ih)" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M370,1162.9063 L370,1182.9063 L390,1182.9063 L370,1162.9063 " fill="#FFFFE0" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="296" x="28" y="1197.04">Need to prevent infinite</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="332" x="28" y="1227.3057">loops from RBAC providers.</text><polygon fill="#808080" points="228,1295.7031,208,1303.7031,228,1311.7031,220,1303.7031" style="stroke: #808080; stroke-width: 2.0;"/><line style="stroke: #808080; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="216" x2="2232" y1="1303.7031" y2="1303.7031"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="240" y="1293.5713">12</text><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="284" y="1293.5713">TODO</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="276" x="364" y="1293.5713">: Azure outbound sync</text><!--
@startuml rbac_proposals_outbound_sync
autonumber
    hide stereotype
    scale 2

    skinparam database {
        BackgroundColor<< NEXT >> lightblue
        BorderColor<< NEXT >> darkblue
        BackgroundColor<< HYPERLEDGER >> lightgrey
        BorderColor<< HYPERLEDGER >> darkgrey
    }
    skinparam entity {
        BackgroundColor<< NEXT >> lightblue
        BorderColor<< NEXT >> darkblue
        BackgroundColor<< HYPERLEDGER >> Lightgrey
        BorderColor<< HYPERLEDGER >> darkgrey
    }
    skinparam boundary {
        BackgroundColor<<NEXT>> lightblue
        BorderColor<<NEXT>> darkblue
        BackgroundColor<<HYPERLEDGER>> Lightgrey
        BorderColor<<HYPERLEDGER>> darkgrey
    }

    boundary "Azure AD" as azure
    boundary "LDAP" as ldap
    boundary "RBAC provider \n<Azure>" as azure_provider <<NEXT>>
    boundary "RBAC Provider \n<LDAP>" as ldap_provider <<NEXT>>
    actor "Approver" as user
    boundary "RBAC Client" as client <<NEXT>>
    entity "RBAC \nREST API \nServer" as API <<NEXT>>
    boundary "Validator" as validator <<HYPERLEDGER>>
    database "RethinkDB" as rethink <<NEXT>>
    entity "RBAC \nTransaction \nProcessor" as tp <<NEXT>>
    entity "LS Inbound" as ls_in <<NEXT>>
    entity "LS Outbound" as ls_out <<NEXT>>

title RBAC Proposals OutboundSync Sequence
== Proposal Approval ==
user -> client: Approves proposal
client -> API: Hit REST endpoint
API -> tp: Initialize sawtooth transaction
API -> validator: Create sawtooth transaction
API -> client: Return approval confirmation
== Outbound ==
validator -> ls_out: Get complete transaction from changefeed
tp -> rethink: Update relevant tables
tp -> rethink: set sync_direction "OUTBOUND"
ls_out -> rethink: Insert to outbound_queue
rethink -> ldap_provider: Provider gets item from outbound_queue
ldap_provider -> ldap: Insert into LDAP server
== TODO ==
note over azure #lightyellow
    Need to prevent infinite
    loops from RBAC providers.
end note
rethink - -[#grey]> azure: **TODO**: Azure outbound sync

@enduml

PlantUML version 1.2019.05(Sat Apr 20 09:45:36 PDT 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.2+9-b159.56
Operating System: Linux
OS Version: 4.18.0-20-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>